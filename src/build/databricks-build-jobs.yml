jobs:
  - job: databricksbuild
    displayName: Azure Databricks Build
    steps:

    - task: CopyFiles@2
      inputs:
        sourceFolder: '$(Build.SourcesDirectory)\examples\databricks\'
        contents: '**' 
        targetFolder: '$(Build.ArtifactStagingDirectory)\application'
      displayName: 'Copy Databricks Application'
    
    - task: PublishBuildArtifacts@1
      inputs:
        pathtoPublish: '$(Build.ArtifactStagingDirectory)'
        artifactName: databricks
      displayName: 'Publish Databricks'
    
    - task: CopyFiles@2
      inputs:
        sourceFolder: 'src\scripts\infrastructure\'
        contents: '**' 
        targetFolder: '$(Build.ArtifactStagingDirectory)\infrastructure'
      displayName: 'Copy Infrastructure'

    - task: PublishBuildArtifacts@1
      inputs:
        pathtoPublish: '$(Build.ArtifactStagingDirectory)'
        artifactName: databricks
      displayName: 'Publish Databricks'