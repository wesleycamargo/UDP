parameters:
  - name: resourceConfiguration
    type: object

jobs:
  - job: infrastructurebuild
    displayName: Azure Infrastructure Build
    steps:
      - task: CopyFiles@2
        inputs:
          sourceFolder: 'src\scripts\infrastructure\dataplatform-batchprocessing'
          contents: '**' 
          targetFolder: '$(Build.ArtifactStagingDirectory)\infrastructure\dataplatform-batchprocessing'
        displayName: 'Copy Infrastructure'

      - task: CopyFiles@2
        inputs:
          sourceFolder: 'src\scripts\infrastructure\tests'
          contents: '**' 
          targetFolder: '$(Build.ArtifactStagingDirectory)\infrastructure\tests'
        displayName: 'Copy Infrastructure'

      - task: CopyFiles@2
        inputs:
          sourceFolder: 'src\scripts\infrastructure\modules'
          contents: '**' 
          targetFolder: '$(Build.ArtifactStagingDirectory)\infrastructure\modules'
        displayName: 'Copy Infrastructure'

      - task: PublishBuildArtifacts@1
        inputs:
          pathtoPublish: '$(Build.ArtifactStagingDirectory)\infrastructure'
          artifactName: infrastructure
        displayName: 'Publish Infrastructure'


    # - task: CopyFiles@2
    #   inputs:
    #     sourceFolder: 'src\scripts\infrastructure\'
    #     contents: '**' 
    #     targetFolder: '$(Build.ArtifactStagingDirectory)'
    #   displayName: 'Copy Infrastructure'
    
    # - task: PublishBuildArtifacts@1
    #   inputs:
    #     pathtoPublish: '$(Build.ArtifactStagingDirectory)'
    #     artifactName: infrastructure
    #   displayName: 'Publish Infrastructure'